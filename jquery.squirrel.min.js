!function(e,t,r){function n(r,n,i,a){var s=e.JSON.parse(r.getItem(n));if(null===s&&(s={}),u(a)||null===a)return u(s[i])?null:s[i];var o={};return o[i]=a,t.extend(s,o),r.setItem(n,e.JSON.stringify(s)),a}function i(e,t){e.removeItem(t)}function a(e){return"boolean"===t.type(e)}function s(e){return"object"===t.type(e)}function o(e){return"string"===t.type(e)&&e.trim().length>0}function u(e){return e===r}function l(e,t){return o(e)?e:t}t.fn.extend({squirrel:function(r,d){d=t.extend({},t.fn.squirrel.options,d),d.clearOnSubmit=d.clear_on_submit,d.storageMethod=d.storage_method,d.storageKey=d.storage_key,d.storageKeyPrefix=d.storage_key_prefix;var p=null;if(o(d.storageMethod)?p="LOCAL"===d.storageMethod.toUpperCase()?e.localStorage:e.sessionStorage:null!==d.storageMethod&&s(d.storageMethod)&&(p=d.storageMethod),null===p||!(s(p)&&"getItem"in p&&"removeItem"in p&&"setItem"in p))return this;r=o(r)&&h.test(r)?r.toUpperCase():"START";var m="input[type!=file]:not(.squirrel-ignore), select:not(.squirrel-ignore), textarea:not(.squirrel-ignore)",y="button[type=reset], input[type=reset]",v="input[id], input[name], select[id], select[name], textarea[id], textarea[name]";return d.storageKey=l(d.storageKey,"squirrel"),d.storageKeyPrefix=l(d.storageKeyPrefix,""),this.each(function(){var e=t(this),s=e.attr("data-squirrel"),l=d.storageKeyPrefix+(o(s)?s:d.storageKey);switch(r){case"CLEAR":case"REMOVE":i(p,l);break;case"OFF":case"STOP":e.find(m).off(f),e.find(y).off(c),e.off(g);break;default:e.find("*").filter(v).each(function(){var r=t(this),i=r.attr("name");if(u(i)&&(i=r.attr("id"),u(i)))return e;var a=null;switch(this.tagName){case"INPUT":case"TEXTAREA":var s=r.attr("type");if("checkbox"===s){var c=r.attr("value");o(c)||(c=""),a=n(p,l,i+c),null!==a&&a!==this.checked&&(this.checked=a===!0,r.trigger("change"))}else"radio"===s?(a=n(p,l,i),null!==a&&a!==this.checked&&(this.checked=r.val()===a,r.trigger("change"))):(a=n(p,l,i),null!==a&&!r.is("[readonly]")&&r.is(":enabled")&&r.val()!==a&&r.val(a).trigger("change"));break;case"SELECT":a=n(p,l,i),null!==a&&t.each(t.isArray(a)?a:[a],function(e,n){r.find("option").filter(function(){var e=t(this);return e.val()===n||e.html()===n}).prop("selected",!0).trigger("change")})}}),e.find(m).on(f,function(){var e=t(this),r=e.attr("name");if(!u(r)||(r=e.attr("id"),!u(r))){var i=e.attr("value"),a="checkbox"!==this.type||u(i)?r:r+i;n(p,l,a,"checkbox"===this.type?e.prop("checked"):e.val())}}),e.find(y).on(c,function(){i(p,l)}),e.on(g,function(){(!a(d.clearOnSubmit)||d.clearOnSubmit)&&i(p,l)})}})}});var c="click.squirrel.js",f="blur.squirrel.js keyup.squirrel.js change.squirrel.js",g="submit.squirrel.js",h=/^(?:CLEAR|REMOVE|OFF|STOP)$/i;t.fn.squirrel.options={clear_on_submit:!0,storage_method:"session",storage_key:"squirrel",storage_key_prefix:""},t(function(){t("form.squirrel, form[data-squirrel]").squirrel()})}(window,window.jQuery);
